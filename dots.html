<!DOCTYPE html>
<html>
   <head>
   <title>Drifting Dots</title>
   <script src="p5/p5.js"></script>
      <script type="text/javascript">

Dots = [];
paused = false;

function fresh_x_pos() {
  return Math.random() * 600 - 5;
}

function fresh_dot() {
  return [fresh_x_pos(), 0, Math.random()*50 + 10, Math.random()*100 + 50,
    randomGaussian(7, 1)];
}

function setup() {
  createCanvas(600, 600);

  frameRate(30);
  background(0);
  colorMode(RGB, 255, 255, 255);
  smooth();


  Dots.push(fresh_dot());
}

function draw() { 

 //if (paused) {
 //   return;
  //}

  background(0);

  color(255);

  newDots = [];

  for (var i=0; i<Dots.length; i++) {

    ellipse(Dots[i][1], 
      Dots[i][0] + Dots[i][2] * Math.sin(Dots[i][1]/Dots[i][3]),
       10, 10);
    
    Dots[i][1] += paused ? Dots[i][4] : 50;
    
    if (Dots[i][1] > 600 + 10) {
      if (Math.random() <= 0.8){
        newDots.push(fresh_dot());
      }
    } else {
      newDots.push(Dots[i]);
    }

  }


  if (Math.random() <= 0.2 && newDots.length<20) {
      newDots.push(fresh_dot());
  }

  Dots = newDots;



}

function keyPressed() {
  if (key == " ") {
    console.log("Pause/Unpause");
    paused = !paused;
  }
}
function mousePressed() {
}

      </script>
   </head>
   <body>
   </body>
</html>